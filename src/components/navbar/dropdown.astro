---
import { Dropdown as NavDropdown, DropdownItems } from 'astro-navbar'
const { title, lastItem, children } = Astro.props
---

<li class="relative">
  <NavDropdown class="group">
    <button
      class="flex w-full items-center gap-1 rounded py-2 text-gray-700 hover:text-gray-900 focus-visible:outline focus-visible:outline-2 focus-visible:outline-blue-600 lg:w-auto lg:px-3"
      aria-haspopup="menu"
    >
      <span>{title}</span>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
        stroke-width="3" stroke="currentColor"
        class="mt-0.5 h-3 w-3 transition-transform group-open:rotate-180">
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
      </svg>
    </button>

    <DropdownItems>
      <div
        class:list={[
          'lg:absolute w-full lg:w-56 z-20',
          lastItem ? 'lg:right-0 origin-top-right' : 'lg:left-0 origin-top-left',
        ]}
      >
        <div class="flex flex-col px-1 lg:rounded-md lg:border lg:bg-white lg:py-2 lg:shadow">
          {children.map((item) => (
            <a
              href={item.path}
              class="flex items-center gap-2 rounded px-3 py-2 text-sm text-gray-700 hover:bg-[#dfecf7] hover:text-[#2b2523] focus-visible:outline focus-visible:outline-2 focus-visible:outline-blue-600"
              role="menuitem"
            >
              {item.icon && <img src={item.icon} alt="" class="inline-block h-4 w-4" />}
              {item.title}
            </a>
          ))}
        </div>
      </div>
    </DropdownItems>
  </NavDropdown>
</li>
